(()=>{"use strict";class e{constructor(e,t,n,o){this.task=e,this.description=t,this.priority=n,this.index=o,this.done=!1}}function t(e){let t=document.createElement("table");t.classList.add("taskTable");let l=document.createElement("tr"),s=document.createElement("th"),i=document.createElement("th");i.setAttribute("data",e.index),s.classList.add("taskName"),i.classList.add("taskPriority"),s.innerHTML=e.task+'<i class="far fa-calendar-times"></i>';let r=s.lastChild;r.setAttribute("data",e.index),r.addEventListener("click",(function(){event.stopPropagation(),function(e){let t=e,n=c(document.getElementById("selectedProjectName").getAttribute("data"));t<n.tasks.length&&n.tasks.splice(t,1),a(n),n.tasks.length>=1&&(f()?"complete"!=document.getElementById("taskSection").lastChild.getAttribute("id")&&document.getElementById("taskSection").appendChild(o()):"complete"==document.getElementById("taskSection").lastChild.getAttribute("id")&&document.getElementById("taskSection").lastChild.remove()),localStorage.setItem("projects",JSON.stringify(d()))}(e.index)})),i.textContent=e.priority,i.classList.add(e.priority),i.onclick=function(){!function(e){"low"==e.priority?e.priority="medium":"medium"==e.priority?e.priority="high":e.priority="low";let t=document.getElementById("selectedProjectName").getAttribute("data");p(d()[t],t),localStorage.setItem("projects",JSON.stringify(d()))}(e)},s.onclick=n,l.appendChild(s),l.appendChild(i);let m=document.createElement("tr"),u=document.createElement("td"),g=document.createElement("td");return u.classList.add("taskDesc"),g.classList.add("date"),u.textContent=e.description,g.textContent="1/2/abc",function(e){c(document.getElementById("selectedProjectName").getAttribute("data")).tasks[e.lastChild.getAttribute("data")].done?e.classList.add("done"):e.classList.remove("done")}(s),m.appendChild(u),m.appendChild(g),t.appendChild(l),t.appendChild(m),t}function n(){let e=c(document.getElementById("selectedProjectName").getAttribute("data")).tasks[this.lastChild.getAttribute("data")];e.done=!e.done,1==e.done?(this.classList.add("done"),f()&&"complete"!=document.getElementById("taskSection").lastChild.getAttribute("id")&&document.getElementById("taskSection").appendChild(o())):(this.classList.remove("done"),f()||"complete"==document.getElementById("taskSection").lastChild.getAttribute("id")&&document.getElementById("taskSection").lastChild.remove()),localStorage.setItem("projects",JSON.stringify(d()))}function o(){let e=document.createElement("div");e.setAttribute("id","complete");let t=document.createElement("i");t.classList.add("fas"),t.classList.add("fa-mug-hot"),t.style.fontSize="2em",e.appendChild(t);let n=document.createElement("p");return n.textContent="Looks like you completed all the pending tasks, Delete the tasks to keep everything clean",e.appendChild(n),e}function a(e){if(function(e){let t=0;for(let n of e.tasks)n.index=t,t++;localStorage.setItem("projects",JSON.stringify(d()))}(e),0==e.tasks.length)!function(){let e=document.getElementById("taskSection");e.innerHTML="";let t=document.createElement("div");t.innerHTML='<h2>Hurray you are free. <i class="fas fa-glass-cheers" style="margin-left: 1  em; color: gray;"></i></h2> You may want to delete this project, or consider adding more tasks if not finished <i class="far fa-laugh-beam"></i> . Best of Luck.<br><br><br>',e.appendChild(t)}();else{let n=document.getElementById("taskSection");n.innerHTML="";for(let o of e.tasks){let e=t(o);n.appendChild(e)}}localStorage.setItem("projects",JSON.stringify(d()))}class l{constructor(e,t){this.projectName=e,this.tasks=[],this.index=t}addTodo(e){this.tasks.add(e)}}var s="none",i=[];function c(e){if(e>=0&&e<i.length)return i[e]}function d(){return i}function r(){localStorage.setItem("projects",JSON.stringify(i)),document.getElementById("selectedProjectName").textContent="Uh oh, No projects available",document.getElementById("taskSection").innerHTML=""}function m(){let e=0;for(let t of i)t.index=e,e++;localStorage.setItem("projects",JSON.stringify(i))}function u(){let e=document.getElementById("projects");0==e.length?document.getElementById("selectedProjectName").textContent="No Project":p(i[0],0),e.innerHTML="";let t=0;for(let e of i){let n=g(e,t);t++,document.getElementById("projects").appendChild(n)}localStorage.setItem("projects",JSON.stringify(i))}function g(e,t){let n=document.createElement("div");n.textContent=e.projectName,n.setAttribute("data",t),n.classList.add("project"),n.onclick=function(){p(e,e.index)};let o=document.createElement("span");o.classList.add("trash"),o.onclick=function(){var e;e=t,localStorage.setItem("projects",JSON.stringify(i)),i.splice(e,1),0==i.length?r():m(),u()};let a=document.createElement("i");return a.classList.add("far"),a.classList.add("fa-trash-alt"),o.appendChild(a),n.appendChild(o),n}function p(e,t){if(null!=e&&null!=e||(e=c(t)),null!=t&&null!=t||(t=i.indexOf(e)),i.length>0&&i[t]==e){let n=document.getElementById("selectedProjectName");document.getElementById("showTaskForm").setAttribute("data",t),n.textContent=e.projectName,n.setAttribute("data",t),a(e)}}function h(t,n,o,a){let l=i[a],c=l.tasks.length,d=new e(t,n,o,c);l.tasks.push(d),"na"!=s&&"nd"!=s||y(s),p(l,a),localStorage.setItem("projects",JSON.stringify(i))}function f(){let e=i[document.getElementById("selectedProjectName").getAttribute("data")];for(let t of e.tasks)if(0==t.done)return!1;return!0}function y(e){"aa"==e?(s="none",k()):"ad"==e?(s="none",I()):"na"==e?(s="none",E()):"nd"==e?(s="none",S()):console.log("Unexpected code received"),localStorage.setItem("projects",JSON.stringify(i))}function k(){"ad"==s?i.reverse():i.sort((function(e,t){let n=e.projectName.toLowerCase(),o=t.projectName.toLowerCase();return n<o?-1:n>o?1:0})),s="aa",m(),u()}function I(){"aa"==s?i.reverse():i.sort((function(e,t){let n=e.projectName.toLowerCase(),o=t.projectName.toLowerCase();return n>o?-1:n<o?1:0})),s="ad",m(),u()}function E(){"nd"==s?i.reverse():i.sort((function(e,t){return e.tasks.length-t.tasks.length})),s="na",m(),u()}function S(){"na"==s?i.reverse():i.sort((function(e,t){return t.tasks.length-e.tasks.length})),s="nd",m(),u()}function B(){document.getElementById("input-todo").style.visibility="hidden"}(i=JSON.parse(localStorage.getItem("projects")))==[]&&localStorage.setItem("newUser","true"),0==i.length&&"true"==localStorage.getItem("newUser")&&(function(){let e=new l("Sample Project 1",0);i.push(e),h("Sample Task 1","This is a short and sweet description for the task","low",0),h("Sample Task 2","This is a short and sweet description for the task","medium",0),h("Sample Task 3","Description is optional","high",0),i.push(new l("Pro2",i.length)),i.push(new l("Pro3",i.length))}(),localStorage.setItem("newUser","false")),u(),document.getElementById("createProject").onclick=function(){let e=d();localStorage.setItem("newUser","false");let t=document.getElementById("formProjectName");if(""==t.value)alert("Give your valuable project a name. Get creative");else{let n=new l(t.value,e.length);p(n),t.value="",e.push(n),y(s),u()}},document.getElementById("showTaskForm").onclick=function(){document.getElementById("input-todo").style.visibility="visible";let e=document.getElementById("showTaskForm").getAttribute("data");document.getElementById("submitForm").setAttribute("data",e)},document.getElementById("cancelForm").onclick=B,document.getElementById("submitForm").onclick=function(){let e=document.getElementById("taskNameInput"),t=document.getElementById("taskDescInput"),n=document.getElementById("priority"),o=e.value,a=t.value,l=n.value,s=this.getAttribute("data");!function(e,t){let n=c(t);if(""==e)return!1;if(e.length>25)return!1;if(null==e||null==e)return!1;for(let t of n.tasks)if(t.task==e)return!1;return!0}(o,s)?alert("Task name should be unique, non-empty, should have less than 25 characters and optionally amazing."):(h(o,a,l,s),function(){let e=document.getElementById("taskNameInput"),t=document.getElementById("taskDescInput"),n=document.getElementById("priority");t.value="",e.value="",n.value="low"}(),B())},document.getElementById("p-sort-alpha-down").onclick=k,document.getElementById("p-sort-alpha-up").onclick=I,document.getElementById("p-sort-num-down").onclick=E,document.getElementById("p-sort-num-up").onclick=S,0==d().length&&r()})();