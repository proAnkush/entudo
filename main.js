(()=>{"use strict";class e{constructor(e,t,n,o){this.task=e,this.description=t,this.priority=n,this.index=o,this.done=!1}getTaskName(){return this.task}getDesc(){return this.description}getPriority(){return this.priority}setTaskName(e){this.task=e}setDesc(e){this.description=e}setPriority(e){this.priority=e}}function t(e){let t=document.createElement("table");t.classList.add("taskTable");let i=document.createElement("tr"),s=document.createElement("th"),l=document.createElement("th");l.setAttribute("data",e.index),s.classList.add("taskName"),l.classList.add("taskPriority"),s.innerHTML=e.getTaskName()+'<i class="far fa-calendar-times"></i>';let r=s.lastChild;r.setAttribute("data",e.index),r.addEventListener("click",(function(){event.stopPropagation(),function(e){let t=e,n=d(document.getElementById("selectedProjectName").getAttribute("data"));t<n.tasks.length&&n.tasks.splice(t,1),a(n),n.tasks.length>=1&&(p()?"complete"!=document.getElementById("taskSection").lastChild.getAttribute("id")&&document.getElementById("taskSection").appendChild(o()):"complete"==document.getElementById("taskSection").lastChild.getAttribute("id")&&document.getElementById("taskSection").lastChild.remove())}(e.index)})),l.textContent=e.getPriority(),l.classList.add(e.getPriority()),l.onclick=function(){!function(e){"low"==e.priority?e.priority="medium":"medium"==e.priority?e.priority="high":e.priority="low";let t=document.getElementById("selectedProjectName").getAttribute("data");h(c()[t],t)}(e)},s.onclick=n,i.appendChild(s),i.appendChild(l);let u=document.createElement("tr"),m=document.createElement("td"),g=document.createElement("td");return m.classList.add("taskDesc"),g.classList.add("date"),m.textContent=e.getDesc(),g.textContent="1/2/abc",function(e){d(document.getElementById("selectedProjectName").getAttribute("data")).tasks[e.lastChild.getAttribute("data")].done?e.classList.add("done"):e.classList.remove("done")}(s),u.appendChild(m),u.appendChild(g),t.appendChild(i),t.appendChild(u),t}function n(){let e=d(document.getElementById("selectedProjectName").getAttribute("data")).tasks[this.lastChild.getAttribute("data")];e.done=!e.done,1==e.done?(this.classList.add("done"),p()&&"complete"!=document.getElementById("taskSection").lastChild.getAttribute("id")&&document.getElementById("taskSection").appendChild(o())):(this.classList.remove("done"),p()||(console.log(document.getElementById("taskSection").lastChild),"complete"==document.getElementById("taskSection").lastChild.getAttribute("id")&&document.getElementById("taskSection").lastChild.remove()))}function o(){let e=document.createElement("div");e.setAttribute("id","complete");let t=document.createElement("i");t.classList.add("fas"),t.classList.add("fa-mug-hot"),t.style.fontSize="2em",e.appendChild(t);let n=document.createElement("p");return n.textContent="Looks like you completed all the pending tasks, Delete the tasks to keep everything clean",e.appendChild(n),e}function a(e){if(function(e){let t=0;for(let n of e.tasks)n.index=t,t++}(e),0==e.tasks.length)!function(){let e=document.getElementById("taskSection");e.innerHTML="";let t=document.createElement("div");t.innerHTML='<h2>Hurray you are free. <i class="fas fa-glass-cheers" style="margin-left: 1  em; color: gray;"></i></h2> You may want to delete this project, or consider adding more tasks if not finished <i class="far fa-laugh-beam"></i> . Best of Luck.<br><br><br>',e.appendChild(t)}();else{let n=document.getElementById("taskSection");n.innerHTML="";for(let o of e.tasks){let e=t(o);n.appendChild(e)}}}class i{constructor(e,t){this.projectName=e,this.tasks=[],this.index=t}getName(){return this.projectName}setName(e){this.projectName=e}addTodo(e){this.tasks.add(e)}}var s="none",l=[];function d(e){if(e>=0&&e<l.length)return l[e]}function c(){return l}function r(){let e=0;for(let t of l)t.index=e,e++}function u(){let e=document.getElementById("projects");0==e.length?document.getElementById("selectedProjectName").textContent="No Project":h(l[0],0),e.innerHTML="";let t=0;for(let e of l){let n=m(e,t);t++,document.getElementById("projects").appendChild(n)}}function m(e,t){let n=document.createElement("div");n.textContent=e.getName(),n.setAttribute("data",t),n.classList.add("project"),n.onclick=function(){h(e,e.index)};let o=document.createElement("span");o.classList.add("trash"),o.onclick=function(){var e;e=t,l.splice(e,1),0==l.length?(document.getElementById("selectedProjectName").textContent="Uh oh, No projects available",document.getElementById("taskSection").innerHTML=""):r(),u()};let a=document.createElement("i");return a.classList.add("far"),a.classList.add("fa-trash-alt"),o.appendChild(a),n.appendChild(o),n}function h(e,t){if(null!=e&&null!=e||(e=d(t)),null!=t&&null!=t||(t=l.indexOf(e)),l.length>0&&l[t]==e){let n=document.getElementById("selectedProjectName");document.getElementById("showTaskForm").setAttribute("data",t),n.textContent=e.getName(),n.setAttribute("data",t),a(e)}}function g(t,n,o,a){let i=l[a],d=i.tasks.length,c=new e(t,n,o,d);i.tasks.push(c),"na"!=s&&"nd"!=s||f(s),h(i,a)}function p(){let e=l[document.getElementById("selectedProjectName").getAttribute("data")];for(let t of e.tasks)if(0==t.done)return!1;return!0}function f(e){"aa"==e?(s="none",k()):"ad"==e?(s="none",y()):"na"==e?(s="none",E()):"nd"==e?(s="none",I()):console.log("Unexpected code received")}function k(){"ad"==s?l.reverse():l.sort((function(e,t){let n=e.getName().toLowerCase(),o=t.getName().toLowerCase();return n<o?-1:n>o?1:0})),s="aa",r(),u()}function y(){"aa"==s?l.reverse():l.sort((function(e,t){let n=e.getName().toLowerCase(),o=t.getName().toLowerCase();return n>o?-1:n<o?1:0})),s="ad",r(),u()}function E(){"nd"==s?l.reverse():l.sort((function(e,t){return e.tasks.length-t.tasks.length})),s="na",r(),u()}function I(){"na"==s?l.reverse():l.sort((function(e,t){return t.tasks.length-e.tasks.length})),s="nd",r(),u()}function B(){document.getElementById("input-todo").style.visibility="hidden"}!function(){let e=new i("Sample Project 1",0);l.push(e),g("Sample Task 1","This is a short and sweet description for the task","low",0),g("Sample Task 2","This is a short and sweet description for the task","medium",0),g("Sample Task 3","Description is optional","high",0),g("Sample Task 4","","Priority",0)}(),l.push(new i("Pro2",l.length)),l.push(new i("Pro3",l.length)),u(),document.getElementById("createProject").onclick=function(){let e=c(),t=document.getElementById("formProjectName");if(""==t.value)alert("Give your valuable project a name. Get creative");else{let n=new i(t.value,e.length);h(n),t.value="",e.push(n),f(s),u()}},document.getElementById("showTaskForm").onclick=function(){document.getElementById("input-todo").style.visibility="visible";let e=document.getElementById("showTaskForm").getAttribute("data");document.getElementById("submitForm").setAttribute("data",e)},document.getElementById("cancelForm").onclick=B,document.getElementById("submitForm").onclick=function(){let e=document.getElementById("taskNameInput"),t=document.getElementById("taskDescInput"),n=document.getElementById("priority"),o=e.value,a=t.value,i=n.value,s=this.getAttribute("data");!function(e,t){let n=d(t);if(""==e)return!1;if(e.length>25)return!1;if(null==e||null==e)return!1;for(let t of n.tasks)if(t.getTaskName()==e)return!1;return!0}(o,s)?alert("Task name should be unique, non-empty, should have less than 25 characters and optionally amazing."):(g(o,a,i,s),function(){let e=document.getElementById("taskNameInput"),t=document.getElementById("taskDescInput"),n=document.getElementById("priority");t.value="",e.value="",n.value="low"}(),B())},document.getElementById("p-sort-alpha-down").onclick=k,document.getElementById("p-sort-alpha-up").onclick=y,document.getElementById("p-sort-num-down").onclick=E,document.getElementById("p-sort-num-up").onclick=I})();